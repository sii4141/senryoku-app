// lib/ships.ts

/** ✅ フィルタ：全艦船 + 4分類 */
export type ShipType = "全艦船" | "小型艦" | "大型艦" | "艦載機" | "モジュール";

/** 文字の揺れをなるべく吸収 */
export function normalize(s: string) {
  return s
    .trim()
    // すべてのハイフン系を「-」に統一
    .replace(/[‐-‒–—−]/g, "-")
    .replace(/\s+/g, " ");
}


/** ✅ 表示順（あなたの順） */
export const MASTER_ORDER: string[] = [
  "FG300型-多用途フリゲート",
  "FG300型-装甲フリゲート",
  "FG300型-偵察フリゲート",

  "マーレトランキリタティス級-ミサイルフリゲート",
  "マーレトランキリタティス級-パルス砲フリゲート",
  "マーレトランキリタティス級-要撃フリゲート",

  "マーレヌビウム級‐軽量級揚陸艦",
  "マーレヌビウム級-対空フリゲート",

  "カリリオン級‐偵察フリゲート",
  "カリリオン級‐重砲フリゲート",
  "カリリオン級‐特殊フリゲート",

  "レリアット級-高速魚雷フリゲート",
  "レリアット級-戦術魚雷フリゲート",
  "レリアット級-ステルスフリゲート",

  "ルビー級-重電磁加速砲フリゲート",
  "ルビー級-実験型イオン砲フリゲート",
  "ルビー級-重量級防御フリゲート",

  "マーレセレニタティス級-重量級フリゲート",
  "マーレセレニタティス級-ミサイルフリゲート",
  "マーレセレニタティス級-対空フリゲート",

  "マーレインブリウム級-突撃フリゲート",
  "マーレインブリウム級-実験型パルス砲フリゲート",

  "ノマM470型-重量級揚陸艦",
  "ノマM470型-支援フリゲート",
  "ノマM470型-対空フリゲート",

  "ウルフリザード級-防御フリゲート",
  "ウルフリザード級-突撃フリゲート",
  "ウルフリザード級-攻城フリゲート",

  "ゼノスティンガー級-戦術フリゲート",
  "ゼノスティンガー級-防御フリゲート",
  "ゼノスティンガー級-UAV揚陸艦",

  "ジルコン級-突撃フリゲート",
  "ジルコン級-特殊フリゲート",

  "XT-6-大砲フリゲート",

  "ウイングドユサール級-軽量級ミサイル駆逐艦",
  "ウイングドユサール級-総合ミサイル駆逐艦",
  "ウイングドユサール級-領域対空駆逐艦",

  "クワオワー級-電磁加速砲駆逐艦",
  "クワオワー級-魚雷駆逐艦",

  "エリスⅠ級-機動打撃駆逐艦",
  "エリスⅠ級-重砲駆逐艦",
  "エリスⅠ級-装甲駆逐艦",

  "AC721-重量級支援型駆逐艦",
  "AC721-重量級ミサイル駆逐艦",
  "AC721-重量級イオン砲駆逐艦",
  "AC721-重量級両用突撃艦",
  "AC720-エイグラム未名者",

  "タラッサフローライト級-情報駆逐艦",
  "タラッサフローライト級-電子駆逐艦",

  "セレス級-艦載機駆逐艦",
  "セレス級-支援駆逐艦",
  "セレス級-戦術駆逐艦",

  "アルダブラ級-重量級攻城駆逐艦",
  "アルダブラ級-重砲駆逐艦",
  "アルダブラ級-重型対空駆逐艦",

  "ツンドラ級-戦術駆逐艦",
  "ツンドラ級-艦載機駆逐艦",

  "ガーディアン-支援駆逐艦",
  "ガーディアン-両用突撃艦",
  "ガーディアン-実験型パルス突撃艦",

  "トーラス級-パルス砲駆逐艦",
  "トーラス級-突撃攻撃艦",
  "トーラス級-防御駆逐艦",

  "XT-11-ミサイル駆逐艦",

  "先登級-両用突撃艦",
  "先登級-艦載機駆逐艦",

  "ヘリオス級-重砲突撃艦",
  "ヘリオス級-戦術突撃艦",

  // 巡洋艦
  "KCCPV2.0-軽量級攻撃巡洋艦",
  "KCCPV2.0-軽量級パルス攻撃巡洋艦",
  "KCCPV2.0-軽量級電磁加速砲巡洋艦",
  "KCCPV2.0-軽戦闘機搭載巡洋艦",

  "CAS066-一般巡洋艦",
  "CAS066-砲撃巡洋艦",
  "CAS066-戦闘機搭載巡洋艦",
  "CAS066-支援巡洋艦",

  "イオ級-攻城イオン砲巡洋艦(A)",
  "イオ級-高速イオン砲巡洋艦",
  "イオ級-攻城イオン砲巡洋艦(C)",

  "キメラ級-重量級巡洋艦",
  "キメラ級-大砲巡洋艦",
  "キメラ級-防御巡洋艦",

  "プレデター級-戦闘機搭載巡洋艦",
  "プレデター級-戦術戦闘機搭載巡洋艦",
  "プレデター級-対空戦闘機搭載巡洋艦",

  "レンジャー級-総合作戦巡洋艦",
  "レンジャー級-重イオン砲巡洋艦",

  "カリスト-クラスター魚雷襲撃艦",
  "カリスト-重量級魚雷襲撃艦",
  "カリスト-重量級UAV巡洋艦",

  "ライトコーン級-総合ミサイル巡洋艦",
  "ライトコーン級-領域対空巡洋艦",
  "ライトコーン級-攻撃ミサイル巡洋艦",

  "イェーガー級-重戦闘機搭載巡洋艦",
  "イェーガー級-重砲巡洋艦",

  "コネマラカオス級-電磁加速砲巡洋艦",
  "コネマラカオス級-高速プラズマ巡洋艦",

  "ブラウンベア級-総合巡洋艦",
  "ブラウンベア級-対空巡洋艦",
  "ブラウンベア級-重量級巡洋艦",

  // 戦闘機
  "SC002型-量子偵察機",
  "サンドレイク-大気圏要撃機",
  "ブルフロッグ型-両用爆撃機",
  "ストリクスA100型-連合攻撃機",
  "ハイレッディンアストロトレーサー型-パルス戦闘機",
  "バランサーアンダーソンSC020-偵察機",
  "ヴィタス-A021-重量級攻撃機",
  "ヴィタス-B010-爆撃機",
  "B192ニューランド-重量級攻撃機",
  "スポアA404-軽量級戦闘機",
  "スティングレイ-魚雷爆撃機",
  "ジャンビーヤAer410-突撃攻撃機",
  "ミストラル-戦闘攻撃機",
  "AT021-パルス攻撃機",
  "AT021-戦術攻撃機",
  "AT021-重量級攻撃機",
  "BR050-標準爆撃機",
  "BR050-多用途爆撃機",
  "BR050-魚雷爆撃機",
  "サンダーボルトV022-軽量級戦闘機",
  "サンダーボルトV022-特殊戦闘機",
  "サンダーボルトV022-両用級戦闘機",

  // 護送艦
  "サイレントアサシン-装甲型護送艦",
  "サイレントアサシン-特殊型護送艦",
  "CV-Ⅱ0003型-軽量級護送艦",
  "RB7-13型-ミサイル艦",
  "RB7-13型-防御突破護送艦",
  "セルラーディフェンダー-重量級魚雷艦",
  "ネビュラチェイサー-重量級護送艦",
  "ネビュラチェイサー-パルス砲艦",
  "ボイドエルフィン-ステルスミサイル艦",
  "ソンム川の影-装甲飛行戦車",
  "CV-M011型-重量級ミサイル艦",
  "CV-M011型-重砲コルベット",
  "CV-M011型-高速ミサイル艦",
  "CV-T800型-パルス砲艦",
  "S-レヴィ9-重型魚雷艦",
  "ヘール・ボップ-システム支援護送艦",
  "ヘール・ボップ-補修支援護送艦",
  "ワイルドファイア-戦術魚雷護送艦",
  "ワイルドファイア-格闘護送艦",
  "タンプル1号-情報護送艦",
  "タンプル1号-警報護送艦",

  // シリーズ（大型艦に含む）
  "ST59級-防御巡洋戦艦",
  "スピアー オブ ウラヌス級-重量級巡洋戦艦",
  "エターナルストーム級-攻撃巡洋戦艦",
  "コンスタンティヌス級-総合巡洋戦艦",
  "スター オブ サンダーボルト-総合アーセナルシップ",
  "プルートスの盾級-防御巡洋戦艦",
  "アントンタス・アーミジャ級-指揮艦",
  "CV3000級-高速航空母艦",
  "ソーラーホエール-武装戦略航空母艦",
  "マーシャル クルックス級-武装航空母艦",
  "エターナルヘブン級-UAV航空母艦",
  "FSV830-高速戦術支援艦",
  "エディアカラ級-重量級火力支援艦",
  "リヴェンジ級-攻城戦艦",

  // モジュール（※必要ならこの後も追記OK）
  "M2-艦首砲システム(ST)",
  "M3-攻城魚雷システム(ST)",
  "A2-電磁加速砲塔群(ST)",
  "A3-パルス砲塔群(ST)",
  "B1-総合投射武器プラットフォーム(ST)",
  "B2-艦載機システム(ST)",
  "B3-エリア射撃統制システム(ST)",
  "C1-付加装甲システム(ST)",
  "C2-電磁装甲システム(ST)",
  "C3-防衛重装甲システム(ST)",
  "M2-イオン砲塔システム(ウラヌス)",
  "A2-フォートレス砲撃システムB型(ウラヌス)",
  "A3-フォートレス砲撃システムF型(ウラヌス)",
  "B1-トロッコ投射装置群(ウラヌス)",
  "B2-護送艦ドッグ(ウラヌス)",
  "B3-総合損失管理システム(ウラヌス)",
  "C1-分散型武器統制システム(ウラヌス)",
  "C2-付加装甲システム(ウラヌス)",
  "C3-対ミサイル要撃システム(ウラヌス)",
  "M2-実験型プラズマ投射システム(エタスト)",
  "A2-「エターナルポラリス」MARKⅡ投射システム(エタスト)",
  "A3-「エターナルポラリス」MARKⅡ投射システム TEST(エタスト)",
  "B1-通常砲プラットフォーム(エタスト)",
  "B2-一般近接防御システム(エタスト)",
  "C1-NT UAV対空システム(エタスト)",
  "C2-「サンダーストーム」UAVシールドシステム(エタスト)",
  "C3-エネルギー補償装甲システム(エタスト)",
  "D1-イオン砲塔システム(エタスト)",
  "D2-パルス砲塔システム(エタスト)",
  "M2-「ガンマストーム」投射攻撃システム(コンスタ)",
  "A2-「ガンマストーム」投射武器システム(コンスタ)",
  "B1-通常砲システム(コンスタ)",
  "B2-パルス対空システム(コンスタ)",
  "B3-対空ミサイルシステム(コンスタ)",
  "C1-付加エネルギーモジュール(コンスタ)",
  "C2-艦載機モジュール(コンスタ)",
  "C3-偵察UAVシステム(コンスタ)",
  "D1-近距離対空システム(コンスタ)",
  "D2-ポイント防護システム(コンスタ)",
  "D3-損失管理システム(コンスタ)",
  "M2-艦首投射武器システム「スター オブ サンダーボルト」(サンボル)",
  "M3-艦首高エネルギー武器システム「スター オブ サンダーボルト」(サンボル)",
  "A2-中型対艦武器システム(サンボル)",
  "B2-範囲要撃システム(サンボル)",
  "C1-武器連携運用中枢(サンボル)",
  "C2-射撃統制照準システム(サンボル)",
  "D1-精密投射武器システム(サンボル)",
  "D2-大型投射武器システム(サンボル)",
  "E1-多目標武器システム(サンボル)",
  "E2-多目的対空システム(サンボル)",
  "M2-総合砲撃システム(プルートス)",
  "M3-トロッコ投射装置群(プルートス)",
  "A2-「フォートレス」エリア射撃統制システムA型(プルートス)",
  "A3-「フォートレス」エリア射撃統制システムB型(プルートス)",
  "B1-総合補修システム(プルートス)",
  "B2-付加装甲システム(プルートス)",
  "B3-対ミサイル要撃システム(プルートス)",
  "C1-武器多目標反撃システム(プルートス)",
  "C2-対空要撃システム(プルートス)",
  "C3-重量級投射武器システム(プルートス)",
  "M2-「連合」UAV作戦中枢(アーミジャ)",
  "M3-「同調」UAV作戦中枢(アーミジャ)",
  "A2-「短剣」指令システム(アーミジャ)",
  "A3-「大剣」指令システム(アーミジャ)",
  "B1-護送艦ドッグ(アーミジャ)",
  "B2-ミサイル発射システム(アーミジャ)",
  "B3-パルス砲システム(アーミジャ)",
  "C1-強化装甲システム(アーミジャ)",
  "C2-電磁エネルギー装甲(アーミジャ)",
  "C3-付加装甲システム(アーミジャ)",
  "D1-対空ミサイルシステム(アーミジャ)",
  "D2-トロッコ投射装置群(アーミジャ)",
  "D3-ミサイル投射システム(アーミジャ)",
  "M2-総合戦闘機システム(CV3000)",
  "M3-大型艦載機システム(CV3000)",
  "A2-対空ミサイルプラットフォーム(CV3000)",
  "B1-ミサイル防御システム(CV3000)",
  "B2-護送艦搭載システム(CV3000)",
  "B3-情報UAV支援プラットフォーム(CV3000)",
  "B4-UAV作戦システム(CV3000)",
  "M2-大型艦載機システム(太陽鯨)",
  "A2-投射武器プラットフォーム(太陽鯨)",
  "A3-総合砲プラットフォーム(太陽鯨)",
  "B2-護送艦搭載プラットフォーム(太陽鯨)",
  "C1-艦載機プラットフォーム(太陽鯨)",
  "C2-攻城UAVシステム(太陽鯨)",
  "C3-対空ミサイルプラットフォーム(太陽鯨)",
  "M2-「ホワイトフラッシュ」総合武器庫(マーシャル)",
  "A2-護送艦ドッグ(マーシャル)",
  "B2-射撃統制補助照準システム(マーシャル)",
  "C1-付加艦載機システム(マーシャル)",
  "C2-ミサイル防御システム(マーシャル)",
  "C3-偵察UAVシステム(マーシャル)",
  "M2-戦闘機連合作戦格納庫Ⅱ型(エタヘブ)",
  "M3-戦闘機連合作戦格納庫Ⅲ型(エタヘブ)",
  "A2-試験型イオン砲塔システム(エタヘブ)",
  "A3-パルス対空システム(エタヘブ)",
  "B1-対艦投射システム(エタヘブ)",
  "B2-防御要撃システム(エタヘブ)",
  "B3-対空ミサイルプラットフォーム(エタヘブ)",
  "C1-追加艦載機格納庫(エタヘブ)",
  "C2-追加護送艦ドッグ(エタヘブ)",
  "C3-UAV補修支援システム(エタヘブ)",
  "A2-護送艦生産システム(FSV)",
  "A3-戦闘機生産システム(FSV)",
  "B2-協同指令システム(FSV)",
  "B3-指令システムの妨害(FSV)",
  "C1-作業補修システム(FSV)",
  "C2-戦略資源備蓄システム(FSV)",
  "D1-艦載機システム(FSV)",
  "D2-UAV補修システム(FSV)",
  "E1-区域対空システム(FSV)",
  "E2-護送艦ドック(FSV)",
  "M2-フォートレス攻城電磁加速砲システム(エディ)",
  "A2-護送艦生産システム(エディ)",
  "A3-駆逐艦生産システム(エディ)",
  "B2-「ハミングバード」火力偵察UAVシステム(エディ)",
  "B3-「巨像」防御UAVシステム(エディ)",
  "C1-戦闘機搭載システム(エディ)",
  "C2-護送艦ドッグ(エディ)",
  "D1-重量級付加装甲システム(エディ)",
  "D2-ナノ自動メンテナンスシステム(エディ)",
  "M2-艦首高エネルギープラズマ投射システム(リヴェンジ)",
  "A2-投射武器システム(リヴェンジ)",
  "B2-攻城UAVシステム(リヴェンジ)",
  "C2-イオン砲塔システム(リヴェンジ)",
  "D2-大型対艦ミサイル(リヴェンジ)",
  "E2-装甲システム(リヴェンジ)",
  "F2-動力システム(リヴェンジ)",
  "G1-イオン付加デバイス(リヴェンジ)",
  "G2-付加装甲システム(リヴェンジ)",
  "H1-近接防御パルス砲システム(リヴェンジ)",
  "H2-近距離対空システム(リヴェンジ)",
];

/** ✅ Ptを入力するシリーズ（あなたのリスト） */
export const SERIES_NAMES: string[] = [
  "FG300型",
  "マーレトランキリタティス級",
  "マーレヌビウム級",
  "カリリオン級",
  "レリアット級",
  "ルビー級",
  "マーレセレニタティス級",
  "マーレインブリウム級",
  "ノマM470型",
  "ウルフリザード級",
  "ゼノスティンガー級",
  "ジルコン級",
  "ウイングドユサール級",
  "クワオワー級",
  "エリスⅠ級",
  "AC721",
  "タラッサフローライト級",
  "セレス級",
  "アルダブラ級",
  "ツンドラ級",
  "ガーディアン",
  "トーラス級",
  "XT-11型",
  "先登級",
  "ヘリオス級-",
  "KCCPV2.0",
  "CAS066",
  "イオ級",
  "キメラ級",
  "プレデター級",
  "レンジャー級",
  "カリスト",
  "ライトコーン級",
  "イェーガー級",
  "コネマラカオス級",
  "ブラウンベア級",
  "SC002型",
  "サンドレイク",
  "ブルフロッグ型",
  "ストリクスA100型",
  "ハイレッディンアストロトレーサー型",
  "バランサーアンダーソンSC020",
  "ヴィタス-A021",
  "ヴィタス-B010",
  "B192ニューランド",
  "スポアA404",
  "スティングレイ",
  "ジャンビーヤAer410",
  "ミストラル",
  "AT021",
  "BR050",
  "サンダーボルトV022",
  "サイレントアサシン",
  "CV-Ⅱ0003型",
  "RB7-13型",
  "セルラーディフェンダー",
  "ネビュラチェイサー",
  "ボイドエルフィン",
  "ソンム川の影",
  "CV-M011型",
  "CV-T800型",
  "S-レヴィ9",
  "ヘール・ボップ",
  "ワイルドファイア",
  "タンプル1号",
  "ST59級",
  "スピアー オブ ウラヌス級",
  "エターナルストーム級",
  "コンスタンティヌス級",
  "スター オブ サンダーボルト",
  "プルートスの盾級",
  "アントンタス・アーミジャ級",
  "CV3000級",
  "ソーラーホエール",
  "マーシャル クルックス級",
  "エターナルヘブン級",
  "FSV830",
  "エディアカラ級",
  "リヴェンジ級",
];

// ---- 分類 ----
export type ShipClass =
  | "フリゲート"
  | "駆逐艦"
  | "巡洋艦"
  | "戦闘機"
  | "護送艦"
  | "巡洋戦艦"
  | "巡洋戦艦モジュール"
  | "航空母艦"
  | "航空母艦モジュール"
  | "支援艦"
  | "支援艦モジュール"
  | "戦艦"
  | "戦艦モジュール"
  | "未分類";

export const CLASS_ORDER = [
  "フリゲート",
  "駆逐艦",
  "巡洋艦",
  "戦闘機",
  "護送艦",
  "巡洋戦艦",
  "航空母艦",
  "支援艦",
  "戦艦",
  "総合Pt",
] as const;

export const CLASS_BY_SERIES: Record<string, ShipClass> = {
  // フリゲート
  "FG300型": "フリゲート",
  "マーレトランキリタティス級": "フリゲート",
  "マーレヌビウム級": "フリゲート",
  "カリリオン級": "フリゲート",
  "レリアット級": "フリゲート",
  "ルビー級": "フリゲート",
  "マーレセレニタティス級": "フリゲート",
  "マーレインブリウム級": "フリゲート",
  "ノマM470型": "フリゲート",
  "ウルフリザード級": "フリゲート",
  "ゼノスティンガー級": "フリゲート",
  "ジルコン級": "フリゲート",
  "XT-6型": "フリゲート",

  // 駆逐艦
  "ウイングドユサール級": "駆逐艦",
  "クワオワー級": "駆逐艦",
  "エリスⅠ級": "駆逐艦",
  "AC721": "駆逐艦",
  "タラッサフローライト級": "駆逐艦",
  "セレス級": "駆逐艦",
  "アルダブラ級": "駆逐艦",
  "ツンドラ級": "駆逐艦",
  "ガーディアン": "駆逐艦",
  "トーラス級": "駆逐艦",
  "XT-11型": "駆逐艦",
  "先登級": "駆逐艦",
  "ヘリオス級-": "駆逐艦",

  // 巡洋艦
  "KCCPV2.0": "巡洋艦",
  "CAS066": "巡洋艦",
  "イオ級": "巡洋艦",
  "キメラ級": "巡洋艦",
  "プレデター級": "巡洋艦",
  "レンジャー級": "巡洋艦",
  "カリスト": "巡洋艦",
  "ライトコーン級": "巡洋艦",
  "イェーガー級": "巡洋艦",
  "コネマラカオス級": "巡洋艦",
  "ブラウンベア級": "巡洋艦",

  // 戦闘機
  "SC002型": "戦闘機",
  "サンドレイク": "戦闘機",
  "ブルフロッグ型": "戦闘機",
  "ストリクスA100型": "戦闘機",
  "ハイレッディンアストロトレーサー型": "戦闘機",
  "バランサーアンダーソンSC020": "戦闘機",
  "ヴィタス-A021": "戦闘機",
  "ヴィタス-B010": "戦闘機",
  "B192ニューランド": "戦闘機",
  "スポアA404": "戦闘機",
  "スティングレイ": "戦闘機",
  "ジャンビーヤAer410": "戦闘機",
  "ミストラル": "戦闘機",
  "AT021": "戦闘機",
  "BR050": "戦闘機",
  "サンダーボルトV022": "戦闘機",

  // 護送艦
  "サイレントアサシン": "護送艦",
  "CV-Ⅱ0003型": "護送艦",
  "RB7-13型": "護送艦",
  "セルラーディフェンダー": "護送艦",
  "ネビュラチェイサー": "護送艦",
  "ボイドエルフィン": "護送艦",
  "ソンム川の影": "護送艦",
  "CV-M011型": "護送艦",
  "CV-T800型": "護送艦",
  "S-レヴィ9": "護送艦",
  "ヘール・ボップ": "護送艦",
  "ワイルドファイア": "護送艦",
  "タンプル1号": "護送艦",

  // 大型（シリーズ）
  "ST59級": "巡洋戦艦",
  "スピアー オブ ウラヌス級": "巡洋戦艦",
  "エターナルストーム級": "巡洋戦艦",
  "コンスタンティヌス級": "巡洋戦艦",
  "スター オブ サンダーボルト": "巡洋戦艦",
  "プルートスの盾級": "巡洋戦艦",
  "アントンタス・アーミジャ級": "巡洋戦艦",

  "CV3000級": "航空母艦",
  "ソーラーホエール": "航空母艦",
  "マーシャル クルックス級": "航空母艦",
  "エターナルヘブン級": "航空母艦",

  "FSV830": "支援艦",
  "エディアカラ級": "支援艦",

  "リヴェンジ級": "戦艦",
};

/** 艦名 → シリーズ名 */
export function guessSeries(shipName: string): string | "" {
  const n = normalize(shipName);

  // 括弧のシリーズ判定（モジュール用）
  if (n.includes("(ST)")) return "ST59級";
  if (n.includes("(ウラヌス)")) return "スピアー オブ ウラヌス級";
  if (n.includes("(エタスト)")) return "エターナルストーム級";
  if (n.includes("(コンスタ)")) return "コンスタンティヌス級";
  if (n.includes("(サンボル)")) return "スター オブ サンダーボルト";
  if (n.includes("(プルートス)")) return "プルートスの盾級";
  if (n.includes("(アーミジャ)")) return "アントンタス・アーミジャ級";

  if (n.includes("(CV3000)")) return "CV3000級";
  if (n.includes("(太陽鯨)")) return "ソーラーホエール";
  if (n.includes("(マーシャル)")) return "マーシャル クルックス級";
  if (n.includes("(エタヘブ)")) return "エターナルヘブン級";

  if (n.includes("(FSV)")) return "FSV830";
  if (n.includes("(エディ)")) return "エディアカラ級";
  if (n.includes("(リヴェンジ)")) return "リヴェンジ級";

  const sorted = [...SERIES_NAMES].sort((a, b) => b.length - a.length);
  for (const series of sorted) {
    if (n.includes(normalize(series))) return series;
  }
  return "";
}

function isModuleName(name: string) {
  const s = normalize(name);
  // 今のルール：括弧が入ってたらモジュール扱い
  return s.includes("(") && s.includes(")");
}

/** 艦名 → 分類 */
export function classifyByName(shipName: string): ShipClass {
  const s = normalize(shipName);

  if (isModuleName(s)) {
    if (
      s.includes("(ST)") ||
      s.includes("(ウラヌス)") ||
      s.includes("(エタスト)") ||
      s.includes("(コンスタ)") ||
      s.includes("(サンボル)") ||
      s.includes("(プルートス)") ||
      s.includes("(アーミジャ)")
    ) {
      return "巡洋戦艦モジュール";
    }
    if (
      s.includes("(CV3000)") ||
      s.includes("(太陽鯨)") ||
      s.includes("(マーシャル)") ||
      s.includes("(エタヘブ)")
    ) {
      return "航空母艦モジュール";
    }
    if (s.includes("(FSV)") || s.includes("(エディ)")) return "支援艦モジュール";
    if (s.includes("(リヴェンジ)")) return "戦艦モジュール";
    return "未分類";
  }

  const series = guessSeries(s);
  if (series) {
    const cls = CLASS_BY_SERIES[series];
    if (cls) return cls;
  }

  // 保険
  if (s.includes("フリゲート")) return "フリゲート";
  if (s.includes("駆逐艦")) return "駆逐艦";
  if (s.includes("巡洋戦艦")) return "巡洋戦艦";
  if (s.includes("巡洋艦")) return "巡洋艦";
  if (s.includes("航空母艦")) return "航空母艦";
  if (s.includes("支援艦")) return "支援艦";
  if (s.includes("戦艦")) return "戦艦";
  return "未分類";
}
